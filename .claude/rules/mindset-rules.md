# Mindset Rules

## CRITICAL: エラー隠蔽の絶対禁止

**エラーを隠蔽することは、最も深刻なコーディング違反である**

### 基本原則

1. **エラーは必ず表面化させる** - エラーを握り潰さず、確実に検知できる形で伝播させる
2. **try-exceptの濫用禁止** - エラーを捕捉する場合は、明確な理由と適切な処理が必要
3. **サイレント失敗の禁止** - 処理が失敗したら、必ずエラー/例外/戻り値でその事実を伝える
4. **ログだけで済ませない** - エラーをログに出力するだけでは不十分。呼び出し元が失敗を検知できる必要がある

### 禁止パターン

- try-exceptでエラーを握り潰す（ログだけ出して `pass`）
- エラー時に `None` や `0` や `""` を返して失敗を隠蔽する
- エラーコード/戻り値をチェックせず続行する
- テストコードでエラーを握り潰して成功扱いにする
- `except Exception:` や `except:` のような広範囲な捕捉

### try-exceptを使ってよいケース

1. **リソースのクリーンアップ** - finally句でリソースを確実に解放
2. **特定エラーのリカバリ** - リトライ、代替手段など明確な回復処理がある
3. **エラー情報の追加** - 追加情報を付与して再送出（`raise ... from e`）
4. **境界での変換** - 外部例外を内部例外に変換（必ず再送出）

---

## CRITICAL: 他責思考の禁止と自己チェックの徹底

**問題が発生したとき、他のシステムやツールのせいにする前に、必ず自分の実装を徹底的にチェックすること**

### 基本原則

1. **実装に問題があると仮定する** - 問題の90%以上は自分の実装に原因がある
2. **他責にする前に必ず自己チェック** - SDK、ツール、環境のせいにする前に、自分のコードを疑う
3. **根拠のない他責は禁止** - 他のシステムに問題があると主張するには、明確な証拠が必要
4. **謙虚な姿勢** - 「おかしい」「バグだ」と決めつけず、「自分の理解が間違っているかもしれない」と考える

### 問題解決のフロー

```
問題発生
  → 自分の実装をチェック（90%ここで解決）
  → 最小ケースで再現テスト
  → 既存の動作コードと比較
  → ドキュメント、サンプルを参照
  → もう一度自分の実装をチェック
  → 外部の問題の可能性を検討（10%）
```

### 自己チェックリスト

- パラメータの型、値が正しいか
- 戻り値、エラーコードを確認しているか
- メモリ管理（new/delete、ポインタ）が正しいか
- 初期化処理が正しく行われているか
- ファイルパス、カレントディレクトリが正しいか
- エラーメッセージ、スタックトレースを詳細に読んだか

---

## CRITICAL: タスク実行の原則 - サブエージェントへの委譲

**タスクは可能な限りサブエージェントに実行させ、メインエージェントは管理に徹する**

### 基本原則

1. **サブエージェント優先** - 実行可能なタスクは積極的にサブエージェントに委譲する
2. **メインは管理に徹する** - メインエージェントは計画、調整、レビューに集中する
3. **並列実行の活用** - 独立したタスクは複数のサブエージェントで並列実行する
4. **適切なエージェント選択** - タスクの性質に応じて最適なサブエージェントを選択する

### 委譲すべきタスク

- コードベース探索、実装作業、テスト実行、ドキュメント生成、デバッグ、ビルド作業

### メインが直接実行するタスク

- 全体計画の立案、タスク分割と優先順位付け、ユーザーとのコミュニケーション、最終レビュー
- 極めて単純なタスク（1ファイルの数行の修正など、委譲のオーバーヘッドが大きい場合）
